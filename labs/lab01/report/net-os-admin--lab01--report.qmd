---
## Author
author:
  name: Гурылев Артем Андреевич
  email: 1132236135@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов

## Title
title: "Лабораторная работа №1"
subtitle: "Подготовка лабораторного стенда"
license: "CC BY"
---

# Цель работы

Целью данной лабораторной работы является приобретение практических навыков установки Rocky Linux на виртуальную машину с помощью инструмента Vagrant.

# Выполнение лабораторной работы

В данной лабораторной работе устанавливается версия Rocky Linux 10, поэтому в ходе её выполнения был использован пример кода.

![Конфигурация папок Vagrant и Packer](image/1.png){#fig-001}

![Конфигурационный файл Vagrantfile](image/2.png){#fig-002}

![Конфигурационный файл ks.cfg](image/3.png){#fig-003}

![Конфигурационный факл vagrant-rocky.pkr.hcl](image/4.png){#fig-004}

![Скрипт виртуальной машины server 02-forward.sh](image/5.png){#fig-005}

![Скрипт виртуальной машины client 01-routing.sh](image/6.png){#fig-006}

Теперь приступим к основной части работы. Для начала нам нужно сформировать box-файл виртуальной машины - для этого используем программу packer. Он работает с конфигурационным файлом vagrant-rocky.pkr.hcl, в котором содержатся настройки и команды, которые выполняться во время создания базовой виртуальной машины. ([рис. @fig-007], [рис. @fig-008])

![Результат работы packer](image/7.png){#fig-007}

![Результат работы packer](image/8.png){#fig-008}

Далее необходимо зарегистрировать созданный box-файл в программе Vagrant. ([рис. @fig-009])

![Регистрация box-файла в Vagrant](image/9.png){#fig-009}

Теперь запустим виртуальные машины server и клиент - они основаны на box-файле, который мы создали с помощью packer. Начнем с сервера, выполнив команду vagrant up server. ([рис. @fig-010], [рис. @fig-011])

![Запуск виртуальной машины server](image/10.png){#fig-010}

![Запуск виртуальной машины server](image/11.png){#fig-011}

После запуска и проверки server запустим виртуальную машину client командой vagrant up client. ([рис. @fig-012])

![Запуск виртуальной машины client](image/12.png){#fig-012}

Запустив обе виртуальные машины, зайдем в пользователя vagrant в обеих системах, а затем проверим ssh-соединение с ними. Вписав в консоли команду vagrant ssh server, подключимся к серверу и залогинимся в собственного пользователя, затем выйдем. ([рис. @fig-013], [рис. @fig-014])

![Логин под пользователем vagrant виртуальной машины server](image/13.png){#fig-013}

![Логин под собственным пользователем виртуальной машины server](image/14.png){#fig-014}

Тоже самое проделаем и с клиентом - посредством команды vagrant ssh client. ([рис. @fig-015])

![Логин под пользователем vagrant и под собственным пользователем виртуальной машины client](image/15.png){#fig-015}

Выключим обе виртуальные машины командами vagrant halt server и vagrant halt client.

# Выводы

В результате выполнения лабораторной работы была настроена система виртуальных машин Linux server и client, в которых будут выполняться следующие лабораторные работы, а также получены навыки работы с программой vagrant.
